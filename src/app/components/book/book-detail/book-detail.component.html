<section>
  <div class="container pt-4 d-flex">
    <div class=" col-4 ">
      <img class="book-detail-image" [src]="book.coverUrl" alt="book image">
    </div>
    <div class=" col-8 mt-4 mb-4 book-detail-content">
      <h1>{{book.title}}</h1>
      <ng-container *ngFor="let author of book.authors">
        <p> {{author.name}}</p>
      </ng-container>

      <ng-container *ngIf="book.discount ===0 ||book.discount ===null; else discounted">
        <h3 class="newPrice">{{book.price | currency: 'EUR' : 'symbol' : '1.2-2'}}</h3>
      </ng-container>

      <ng-template #discounted >
        <div class="d-flex">
          <h3 class="oldPrice mr-4 ">{{book.price | currency: 'EUR' : 'symbol' : '1.2-2'}}</h3>
          <h3 class="newPrice">{{ getDiscountedPrice(book) | currency: 'EUR' : 'symbol' : '1.2-2'}}</h3>
        </div>
      </ng-template>

      <div class="row mt-4 mb-4">
          <button mat-button class="themed-button" (click)="addToCart(book)" *ngIf="!bookIsInCart(book)">
            <mat-icon>shopping_basket</mat-icon>
            Aggiungi al carrello
          </button>

          <button mat-button class="themed-button"(click)="goToLink('/cart')" *ngIf="bookIsInCart(book)">
            <mat-icon>shopping_basket</mat-icon>
            Vai al carrello
          </button>
      </div>

      <p>{{book.description}}</p>


      <h2 class="mt-4">Dettagli del Prodotto</h2>
      <div class="product-details">

        <table style="border-collapse: collapse;">
          <tr>
            <td><strong>Prezzo Suggerito:</strong></td>
            <td >{{book.price | currency: 'EUR' : 'symbol' : '1.2-2' }}</td>
          </tr>
          <tr>
            <td><strong>ISBN:</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Pagine:</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Lingua:</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Editore:</strong></td>
            <td>{{book.publisher}}</td>
          </tr>
          <tr>
            <td><strong>Data di Pubblicazione:</strong></td>
            <td >{{book.publicationDate}}</td>
          </tr>
          <tr>
            <td><strong>Format:</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Peso:</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Categoria:</strong></td>
            <td>{{book.category.name}}</td>
          </tr>
        </table>
      </div>



    </div>

  </div>
</section>

